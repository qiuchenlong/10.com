function resizedom(){window_w=$(window).width(),window_h=$(window).height(),$(".pc-list-ul li").css("margin-top",.17*(.9*window_h-88)),window_w>=768?resizepcdom():resizembdom()}function resizembdom(){var e=window_w/750,t=window_h/1334,i=Math.min(e,t);i>1&&(i=1),$(".four-mb-ul").css({transform:"scale("+e+","+e+")"}),$(".three-box").css({transform:"scale("+i+","+i+")","margin-left":.5*(window_w-750*i)})}function resizepcdom(){$(".four-pc-job").each(function(e,t){var i=$(this).attr("data-pos").split(","),a=$(window).width()/1e3;a>1&&(a=1);var n={"margin-left":i[0]*a+"px","margin-top":i[1]*a+"px"};$(this).css(n)}),$(".three-box").attr("style",null)}function linknav(e){0==e?$(".pc-menu .pc-menu-fb").removeClass("open"):($(".pc-menu .pc-menu-fb").addClass("open"),$(".pc-list-ul li").removeClass("active").eq(e-1).addClass("active")),e>=4?$(".tip-down-arrow").hide():$(".tip-down-arrow").show()}function getjob(){$.getJSON("./job.json",function(e){job_data=e})}function events(){$(".about-arrow .col").hover(function(){$(this).find(".css-ani-js").addClass($(this).attr("data-ani"))},function(){$(this).find(".css-ani-js").removeClass($(this).attr("data-ani"))}),$(".about-arrow .col").eq(0).click(function(){about_swiper.swipePrev()}),$(".about-arrow .col").eq(1).click(function(){about_swiper.swipeNext()}),$(".close").click(function(){var e=$(this).attr("data-tar");$(e).removeClass("open")}),$(".four-pc-job").click(function(){jobac(job_data[$(this).attr("data-idx")])}),$(".four-mb-li").click(function(){jobac(job_data[$(this).attr("data-idx")])}),$(".three-arr-left").click(function(){news_swiper.swipePrev()}),$(".three-arr-right").click(function(){news_swiper.swipeNext()}),$(".pc-list-ul li").each(function(e){$(this).click(function(){screen_swiper.swipeTo(e+1)})}),$(".mb-menu-box li").each(function(e){$(this).click(function(){screen_swiper.swipeTo(e),$(".mb-menu").removeClass("open")})}),$(".mb-menu-btn").click(function(){$(".mb-menu").addClass("open")}),$(".tip-down-arrow").click(function(){screen_swiper.swipeNext()}),$(document).bind("mousewheel",function(e,t,i,a){t<0?screen_swiper.swipeNext():screen_swiper.swipePrev()}),$(".sure-btn").click(function(){$(this).hasClass("doing")||postdata()}),$(document).keydown(function(e){38==e.keyCode&&screen_swiper.swipePrev(),40==e.keyCode&&screen_swiper.swipeNext()})}function postdata(){var e={name:$("input[name='username']").val(),mail:$("input[name='email']").val(),phone:$("input[name='phone']").val(),msg:$("textarea[name='message']").val(),filename:""};return""==e.name?(alert("姓名不能为空"),void $("input[name='username']").focus()):""!=e.mail&&/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e.mail)?""!=e.phone&&/^1\d{10}$/.test(e.phone)?""==e.msg?(alert("内容不能为空"),void $("textarea[name='msg']").focus()):($(".sure-btn").addClass("doing"),void(""==$("input[type='file']").val()?sendmail(e):postfile(e))):(alert("电话有误!"),void $("input[name='phone']").focus()):(alert("邮箱有误!"),void $("input[name='email']").focus())}function fileupload(){$("input[type='file']").on("change",function(){$(this).prev().text(getfilename($(this).val()))})}function getfilename(e){return e.replace(/(.*[\\|\/]){0,}([^\.]+.*)/gi,"$2")}function sendmail(e){$.get("http://47.90.50.20:3002/contact_us",e,function(e){200==e.code?(alert("提交成功!"),$(".contact-form")[0].reset(),$("#uploadform")[0].reset(),$("input[type='file']").prev().text("附件")):alert("发生错误，请重新提交！"),$(".sure-btn").removeClass("doing")})}function postfile(e){$.ajax({type:"POST",url:"http://47.90.50.20:3002/file_upload",data:new FormData($("#uploadform")[0]),processData:!1,contentType:!1,success:function(t,i){200==t.code?(e.filename=t.filename,sendmail(e)):(alert("附件上次失败，请重新尝试"),$(".sure-btn").removeClass("doing"))}})}function jobac(e){$(".job-panel .title").text(e.name),$(".job-panel h6").text("部门:"+e.branch),$(".job-panel p").html(e.demand),$(".job-panel").addClass("open")}function reInitNews(){var e=.74*window_w/300;e=Math.ceil(e),2==e&&(e=1),e>4&&(e=4),news_pre_n!=e&&(news_pre_n=e,news_swiper.params.slidesPerView=news_pre_n,news_swiper.params.slidesPerGroup=news_pre_n,news_swiper.reInit())}function swiperAnimateCache(){cr_ani_effects=$("*[ani-effect]");for(var e=0;e<cr_ani_effects.length;e++)cr_ani_effects[e].attributes.style?cr_ani_effects[e].setAttribute("ani-style-cache",cr_ani_effects[e].attributes.style.value):cr_ani_effects[e].removeAttribute("ani-style-cache"," "),cr_ani_effects[e].style.visibility="hidden"}function swiperAnimate(e){clearSwiperAnimate();for(var t=$(e.slides[e.activeIndex]).find("*[ani-effect]"),i=0;i<t.length;i++){t[i].style.visibility="visible";var a=t[i].attributes["ani-effect"]?t[i].attributes["ani-effect"].value:"";t[i].className=t[i].className+"  "+a+" animated";var n=t[i].attributes.style.value,s=t[i].attributes["ani-duration"]?t[i].attributes["ani-duration"].value+"s":"";s&&(n=n+"animation-duration:"+s+";-webkit-animation-duration:"+s+";");var r=t[i].attributes["ani-delay"]?t[i].attributes["ani-delay"].value+"s":"";r&&(n=n+"animation-delay:"+r+";-webkit-animation-delay:"+r+";"),t[i].setAttribute("style",n)}}function clearSwiperAnimate(){for(var e=0;e<cr_ani_effects.length;e++)if(cr_ani_effects[e].attributes["ani-style-cache"]&&cr_ani_effects[e].setAttribute("style",cr_ani_effects[e].attributes["ani-style-cache"].value),cr_ani_effects[e].style.visibility="hidden",cr_ani_effects[e].className=cr_ani_effects[e].className.replace("animated"," "),cr_ani_effects[e].attributes["ani-effect"]){var t=cr_ani_effects[e].attributes["ani-effect"].value;cr_ani_effects[e].className=cr_ani_effects[e].className.replace(t," ")}}var screen_swiper,about_swiper,news_swiper,window_w,window_h,job_data,news_pre_n=1,cr_ani_effects;$(document).ready(function(){screen_swiper=new Swiper(".screen-wrap",{mode:"vertical",initialSlide:0,onFirstInit:function(e){swiperAnimateCache(e)},onSlideChangeStart:function(e){linknav(e.activeIndex)},onSlideChangeEnd:function(e){swiperAnimate(e)}}),about_swiper=new Swiper(".about-wrap"),news_swiper=new Swiper(".three-swiper"),resizedom(),reInitNews(),events(),getjob(),fileupload()}),window.onresize=function(){resizedom(),reInitNews()},function(){for(var e=new PxLoader,t=["images/page-a/bg.jpg","images/page-b/bg.jpg","images/page-c/bg.jpg","images/page-a/earth.png","images/page-a/kejiq.png","images/page-a/txt.png","images/page-b/a.png","images/page-b/b.png","images/page-b/c.png","images/page-d/banner.jpg","images/page-d/join.png","images/page-d/job_border.png","images/page-d/mb-bg.jpg","images/page-d/mb-border.png","images/page-d/mb-quan.png","images/page-d/pc-quan-1.png","images/page-d/pc-quan-2.png","images/page-d/pc-quan-3.png"],i=0;i<t.length;i++)e.addImage(t[i]);e.addProgressListener(function(e){$(".loading-txt").text(parseInt(100*e.completedCount/e.totalCount)+"%")}),e.addCompletionListener(function(){$(".loading").remove(),swiperAnimate(screen_swiper)}),e.start()}();